<!DOCTYPE html
        PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Installation :: Getting Started (ProActive Scheduler
        Toolbox)</title>
    <link rel="stylesheet" href="docstyle.css" type="text/css">
    <meta name="generator" content="DocBook XSL Stylesheets V1.52.2">
    <meta name="description"
          content="Installation of ProActive&#xA;Scheduler Toolbox.">
    <meta http-equiv="Content-Script-Type" content="text/javascript">
    <script language="JavaScript" src="docscripts.js"></script>
</head>
<body><a name="top_of_page"></a>

<p style="font-size:1px;">&nbsp;</p>
<table class="nav" summary="Navigation aid" border="0" width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td valign="baseline"><b>ProActive Scheduler Toolbox</b></td>
        <td valign="baseline" align="right"><a href="proactive_overview.html"><img src="b_prev.gif" border="0" align="bottom"
                                                                        alt="What is ProActive Scheduler Toolbox?"></a>&nbsp;&nbsp;&nbsp;<a
                href="proactive_startup.html"><img src="b_next.gif" border="0" align="bottom" alt="Starting And Connecting"></a></td>
    </tr>
</table>
<table class="feedbacklinktop" border="0" width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td>&nbsp;</td>
        <td align="right">
            <script type="text/javascript" language="JavaScript">
                writeDocFeedbackSurveyLink();
            </script>
            &nbsp;
        </td>
    </tr>
</table>

<h2 class="title">Installation</h2>
<table border="0" cellpadding="4" cellspacing="0" class="pagenavtable">
    <tr>
        <th>On this page&#8230;</th>
    </tr>
    <tr>
        <td><p><a href="proactive_installation.html#installation-1">Introduction</a></p>

            <p><a href="proactive_installation.html#installation-2">Downloading and Installing ProActive Scheduler</a></p>

            <p><a href="proactive_installation.html#installation-3">Scheduler Configuration For Matlab</a></p>

            <p><a href="proactive_installation.html#installation-4">Configuration of Remote Workers for Matlab</a>
            </p>

            <p><a href="proactive_installation.html#installation-5">Setting up java.policy file</a></p>

            </td>
    </tr>
</table>
<a name="installation-1"></a>

<h3 class="title">Introduction</h3>
<p>A typical deployment of ProActive Scheduler with Matlab can be seen on the diagram below :</p>
<img src="SchedulerMatlab.png" alt="ProActive Scheduler With Matlab">
<ul type="disc">
    <li><p>The local Matlab session will connect to the ProActive Scheduler.</p></li>
    <li><p>The local user will submit a function <b>foo</b> to call with a set of parameters.</p></li>
    <li><p>The Scheduler will select among all its resources, those suited to the job.</p></li>
    <li><p>Eventually a License Server Proxy called <i>ProActive License Saver</i>, will ensure that desired license tokens are available on each machine.</p></li>
    <li><p>A Matlab engine will be started on each selected resource</p></li>
    <li><p>Each <b>foo(k)</b> will be executed on remote engines</p></li>
    <li><p>Results will be forwarded back to the user</p></li>
</ul>

<p><b><i>ProActive License Saver</i></b> is distributed separately from ProActive Scheduler, please contact <a href="http://www.activeeon.com">http://www.activeeon.com</a> for more information.</p>
<p>The License Saver address must be specified as an option while running remote tasks. See <a href="proactive_options.html"></a> for more details.</p>

</p>
<a name="installation-2"></a>

<p class="pagenavlink">
    <script language="Javascript">updateSectionId("installation-2");</script>
    <script language="Javascript">addTopOfPageButtons();</script>
    <a href="#top_of_page">Back to Top</a></p>
<h3 class="title">Downloading and Installing ProActive Scheduler</h3>

<p>ProActive Scheduler Toolbox can be downloaded from :</p>

<p><a href="http://www.activeeon.com/community-downloads">http://www.activeeon.com/community-downloads</a></p>

<p>The package which must be downloaded is called <b>ProActive Scheduling</b><br>After downloading the package unzip it in a directory e.g. D:\Scheduling</p>

<p>IMPORTANT: According to your deployment infrastructure, ProActive Scheduler must be installed on :</p>
<ol>
    <li><p>The host which will launch the <b>Scheduler</b>.</p></li>
    <li><p>Each <b>worker host</b> used by the Scheduler.</p></li>
    <li><p>Each <b>client host</b> which will connect to the Scheduler to submit matlab functions.</p></li>
</ol>
<p>The prerequisite for using ProActive is a <b>Java Virtual Machine</b>. On the above list, machines of group 1 and 2 must have a Java Virtual Machine installed and available on the Path of either cmd.exe for Windows or sh for linux. For many ProActive features it is also necessary to define the environment variable JAVA_HOME to the installation directory of the Java Virtual Machine.</p>

<p>Complete configuration and installation of ProActive Scheduler is beyond the scope of this help, for more information, refer to:</p>

<p><a href="http://proactive.inria.fr/release-doc/Scheduling/multiple_html/index.html">ProActive Scheduler Manual</a></p>

<p>On each <b>client host</b>, on the matlab prompt add the path to ProActive Scheduler Toolbox (the folder SCHEDULING/extensions/matlab/toolbox):</p>
<pre>addpath('D:\Scheduling\extensions\matlab\toolbox');</pre>


<a name="installation-3"></a>
<p class="pagenavlink">
    <script language="Javascript">updateSectionId("installation-3");</script>
    <script language="Javascript">addTopOfPageButtons();</script>
    <a href="#top_of_page">Back to Top</a></p>
<h3 class="title">Scheduler Configuration For Matlab</h3>

<p>On the host which will start the <b>Scheduler</b>, inside the file SCHEDULING/config/rm/settings.ini, the following settings must be entered:</p>

<pre>pa.rm.select.script.timeout=60000</pre>

<pre>pa.rm.selection.maxthreadnumber=1</pre>

<a name="installation-4"></a>
<p class="pagenavlink">
    <script language="Javascript">updateSectionId("installation-4");</script>
    <script language="Javascript">addTopOfPageButtons();</script>
    <a href="#top_of_page">Back to Top</a></p>
<h3 class="title">Configuration of Remote Workers for Matlab</h3>

<p>On each <b>worker host</b> that will be used to compute remotely matlab functions, a specific configuration file must be written to tell the scheduler where to find a matlab installation. The configuration file is called <b>MatlabConfiguration.xml</b>, and is located in the folder <b>SCHEDULING/extensions/matlab/config/worker</b> for each <b>Worker Hosts</b></p>

<p>By default, the <b>SCHEDULING/extensions/matlab/config/worker</b> folder only contains two template files one for Linux and one for Windows called <b>MatlabConfigurationTemplateUnix.xml</b> and <b>MatlabConfigurationTemplateWindows.xml</b>, one of this template must be edited and renamed into MatlabConfiguration.xml to setup the configuration for the current <b>Worker Host</b></p>
<p>For example, here is MatlabConfigurationTemplateWindows.xml</p>

<pre>&lt;MatlabInstallations&gt;
    &lt;installation&gt;
        &lt;version&gt;7.9&lt;/version&gt;
        &lt;home&gt;C:\Program Files\MATLAB\R2009b&lt;/home&gt;
        &lt;bindir&gt;bin&lt;/bindir&gt;
        &lt;command&gt;matlab.exe&lt;/command&gt;
    &lt;/installation&gt;
&lt;/MatlabInstallations&gt;</pre>

<p>Here is an explanation of tags used by this file:</p>
<ul type="disc">
    <li><p><b>version:</b> The matlab version installed in numeric format.</p></li>
    <li><p><b>home:</b> Full path to matlab home directory.</p></li>
    <li><p><b>bindir:</b> relative path to the directory where to find the matlab executable. On windows, it is mandatory to use the matlab executable under bin/win32 (bin/win64) and not the executable directly in the bin directory. On linux systems on the other hand, it's mandatory to use the executable in the bin directory.</p></li>
    <li><p><b>command:</b> matlab executable name.</p></li>
</ul>
<p>The file supports multiple matlab configurations on the same Host (i.e. multiple matlab versions), and ProActive Scheduler Toolbox allows to select specific matlab versions for a given job dynamically.</p>

<a name="installation-5"></a>

<p class="pagenavlink">
    <script language="Javascript">updateSectionId("installation-5");</script>
    <script language="Javascript">addTopOfPageButtons();</script>
    <a href="#top_of_page">Back to Top</a></p>
<h3 class="title">Setting up java.policy file</h3>

<p>On each <b>client host</b> that will connect to the Scheduler to submit tasks, it is mandatory to add a specific configuration file for Java called the <b>Java Policy</b> file. This file is meant to define the security settings of a given Java Virtual Machine. This configuration can either be :</p>
<ul type="disc">
    <li><p>Specific to a given <b>matlab installation</b> (but common for all users on this machine).</p></li>
    <li><p>Specific to a <b>given user</b>, but common to all matlab installations of this machine (and also all other Java programs).</p></li>
</ul>
<h4><u>Matlab specific configuration</u></h4>
<p>In order to do the first type of configuration, one needs to have write access to Matlab's installation directory (requires administrator privilege). First a file called <b>matlab.java.policy</b> must be created at any path which doesn't contain spaces, for example<b>d:\path\without\spaces\matlab.java.policy</b>.</p>

<p>The <b>matlab.java.policy</b> file must contain the following:</p>
<pre>grant {
  permission java.security.AllPermission;
};</pre>
<p>Finally, a second file called <b>java.opts</b> must be created in the directory <b>MATLAB/bin/ARCH</b> where:</p>
<ul type="disc">
    <li><p><b>MATLAB</b> refers to your Matlab installation directory.</p></li>
    <li><p><b>ARCH</b> refers to the architecture directory : glnax64 for linux 64bits, win32 for Windows 32bits and win64 for Windows 64bits.</p></li>
</ul>
<p>The java.opts file must have the following content:</p>
<pre>-Djava.security.manager \
-Djava.security.policy=d:\path\without\spaces\matlab.java.policy</pre>
<p>Here <b>java.security.policy</b> points to the full path of the <b>matlab.java.policy</b> file, replace this path with yours.</p>
<p>These two files created, you can start matlab and verify that the configuration has been done correctly, by typing the following command on the matlab prompt:</p>
<pre>>> java.lang.System.getProperty('java.security.policy')

ans =

d:\path\without\spaces\matlab.java.policy
 </pre>
<p>You must see the path that you specified in the <b>java.opts</b> file. If you don't see this path, it means there is a syntax error in the java.opts file, try different things, like writing everything on one line, using a backslash to separate lines, etc (as the syntax accepted varies on different Operating Systems).</p>
<p>If the configuration has not been done properly, a call to PAconnect (see Chapter <a href="proactive_startup.html#startup-3">Connecting to a running ProActive Scheduler from Matlab</a> ) will result in displaying a big error message containing the following Exception:</p>
<pre>java.security.AccessControlException: access denied (java.util.PropertyPermission org.mortbay.io.nio.JVMBUG_THRESHHOLD read)</pre>
<p>Again recheck your configuration if this message appear.</p>
<h4><u>User specific configuration</u></h4>
<p>The second type of java policy configuration is simpler to do than the first one, but it will apply to every Java program started by this user on your machine, including Java applets. Accordingly, this set up should be done with care.</p>
<p>In order to do the second configuration, go to the <b>HOME</b> directory of the user that will use the toolbox. The  <b>HOME</b> directory can be found by typing the following command on the matlab prompt:</p>
<pre>>> java.lang.System.getProperty('user.home')

ans =

/user/fviale/home</pre>
<p>In this HOME directory, create a file called <b>.java.policy</b> (notice the first dot in the file name), which will contain the same text as the <b>matlab.java.policy</b> file from the first method. That's it! Again, if the configuration is not done properly the same exception will appear when trying to connect to the Scheduler.</p>

<a name="bottom_of_page"></a>

<p class="pagenavlink">
    <script language="Javascript">updateSectionId("bottom_of_page");</script>
    <script language="Javascript">addTopOfPageButtons();</script>
    <a href="#top_of_page">Back to Top</a></p>
<table class="feedbacklinkbot" border="0" width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td>&nbsp;</td>
        <td align="right">
            <script type="text/javascript" language="JavaScript">
                writeDocFeedbackSurveyLink();
            </script>
            &nbsp;
        </td>
    </tr>
</table>
<p></p>
<table class="nav" summary="Navigation aid" border="0" width="100%" cellpadding="0" cellspacing="0">
    <tr valign="top">
        <td align="left" width="20"><a href="proactive_overview.html"><img src="b_prev.gif" border="0" align="bottom"
                                                                alt="What is ProActive Scheduler Toolbox?"></a>&nbsp;</td>
        <td align="left">What is ProActive Scheduler Toolbox?</td>
        <td>&nbsp;</td>
        <td align="right">Starting And Connecting</td>
        <td align="right" width="20"><a href="proactive_startup.html"><img src="b_next.gif" border="0" align="bottom"
                                                                   alt="Starting And Connecting"></a></td>
    </tr>
</table>
<br>

<p class="copy">&copy; Copyright (C) 1997-2011 INRIA/University of Nice-Sophia Antipolis/ActiveEon
    <tt class="minicdot">&#149;</tt> <a href="license.txt">Terms of Use</a></p>
<!-- Last updated: Tue Jul 31 19:44:58 EDT 2007--></body>
</html>
